## Представление звука и изображения в компьютерных системах. Устройства ввода, обработки и вывода мультимедиа информации. Форматы представления звуковых и видеофайлов. Оцифровка и компрессия. Программные средства записи, обработки и воспроизведения звуковых и видеофайлов. Мультимедиа в вычислительных сетях.


О двух технологиях компьютерной графики — растровой и векторной — вы знаете из курса информатики основной школы.

В растровой графике графическая информация — это совокупность данных о цвете каждого пикселя на экране. Это то, о чем говорилось выше. В векторной графике графическая информация — это данные, математически описывающие графические примитивы, составляющие рисунок: прямые, дуги, прямоугольники, овалы и пр. Положение и форма графических примитивов представляются в системе экранных координат.

Растровую графику (редакторы растрового типа) применяют при разработке электронных (мультимедийных) и полиграфических изданий. Растровые иллюстрации редко создают вручную с помощью компьютерных программ. Чаще для этой цели используют сканированные иллюстрации, подготовленные художником на бумаге, или фотографии. Для ввода растровых изображений в компьютер применяются цифровые фото- и видеокамеры. Большинство графических редакторов растрового типа в большей мере ориентированы не на создание изображений, а на их обработку.

Достоинство растровой графики — эффективное представление изображений фотографического качества. Основной недостаток растрового способа представления изображения — большой объем занимаемой памяти. Для его сокращения приходится применять различные способы сжатия данных. Другой недостаток растровых изображений связан с искажением изображения при его масштабировании. Поскольку изображение состоит из фиксированного числа точек, увеличение изображения приводит к тому, что эти точки становятся крупнее. Увеличение размера точек растра визуально искажает иллюстрацию и делает ее грубой.

Векторные графические редакторы предназначены в первую очередь для создания иллюстраций и в меньшей степени для их обработки.

Достоинства векторной графики — сравнительно небольшой объем памяти, занимаемой векторными файлами, масштабирование изображения без потери качества. Однако средствами векторной графики проблематично получить высококачественное художественное изображение. Обычно средства векторной графики используют не для создания художественных композиций, а для оформительских, чертежных и проектно-конструкторских работ.

Графическая информация сохраняется в файлах на диске. Существуют разнообразные форматы графических файлов. Они делятся на растровые и векторные. Растровые графические файлы (форматы JPEG, BMP, TIFF и другие) хранят информацию о цвете каждого пикселя изображения на экране. В графических файлах векторного формата (например, WMF, CGM) содержатся описания графических примитивов, составляющих рисунок.

Следует понимать, что графические данные, помещаемые в видеопамять и выводимые на экран, имеют растровый формат вне зависимости от того, с помощью каких программных средств (растровых или векторных) они получены.


Ввод звука в компьютер производится с помощью звукового устройства (микрофона, радио и др.), выход которого подключается к порту звуковой карты. Задача звуковой карты — с определенной частотой производить измерения уровня звукового сигнала (преобразованного в электрические колебания) и результаты измерения записывать в память компьютера. Этот процесс называют оцифровкой звука.

Промежуток времени между двумя измерениями называется периодом измерений — τ с. Обратная величина называется частотой дискретизации — 1/τ (герц). Чем выше частота измерений, тем выше качество цифрового звука.

Результаты таких измерений представляются целыми положительными числами с конечным количеством разрядов. Вы уже знаете, что в таком случае получается дискретное конечное множество значений в ограниченном диапазоне. Размер этого диапазона зависит от разрядности ячейки — регистра памяти звуковой карты. Снова работает формула 2i, где i — разрядность регистра. Число i называют также разрядностью дискретизации. Записанные данные сохраняются в файлах специальных звуковых форматов.

Существуют программы обработки звука — редакторы звука, позволяющие создавать различные музыкальные эффекты, очищать звук от шумов, согласовывать с изображениями для создания мультимедийных продуктов и т. д. С помощью специальных устройств, генерирующих звук, звуковые файлы могут преобразовываться в звуковые волны, воспринимаемые слухом человека.

При хранении оцифрованного звука приходится решать проблему уменьшения объема звуковых файлов. Для этого кроме кодирования данных без потерь, позволяющего осуществлять стопроцентное восстановление данных из сжатого потока, используется кодирование данных с потерями. Цель такого кодирования — добиться схожести звучания восстановленного сигнала с оригиналом при максимальном сжатии данных. Это достигается путем использования различных алгоритмов, сжимающих оригинальный сигнал путем выкидывания из него слабослышимых элементов. Методов сжатия, а также программ, реализующих эти методы, существует много.

Для сохранения звука без потерь используется универсальный звуковой формат файлов WAV. Наиболее известный формат «сжатого» звука (с потерями) — MP3. Он обеспечивает сжатие данных в 10 раз и более.



Все мы знаем, что раз информация сжимается, то возможны ее потери. Поэтому все кодеки можно разделить на две группы: с потерей качества и без потери качества. Пусть вас не пугает слово «с потерей» - как правило, кодеки отсекают «лишнюю» информацию, которая не различима для нашего глаза и уха (практически не различима).

К кодекам, обеспечивающим сжатие без потери качества, относят:

FLAC (Free Lossless Audio Codec);
APE (Monkey’s Audio);
ALAC (Apple Lossless Audio Codec).
А вот кодеки с потерей качества:

MP3,
WMA,
OGG,
ААС.
Если вы - фанат звука, то есть смысл поискать музыку в формате FLAG. Для обычного же бытового прослушивания вполне хватит самого распространенного формата MP3. К тому же, чтобы ощутить всю разницу между форматами MP3 и FLAC, нужно профессиональное оборудование для воспроизведения звука, к сожалению, планшет к такому оборудованию не относится. Поэтому не вижу смысла загружать музыку в формате FLAC на планшет.

Теперь вкратце рассмотрим сами аудио форматы:

WAV - самый первый (или один из первых) аудиоформатов. Используется для хранения несжатых аудиозаписей. Одна минута записи в формате WAV занимает 10 Мб. Обычно в этот формат копируют Audio CD, а потом получившиеся WAV-файлы сжимают МРЗ-кодеком для экономии пространства.
MP3 (MPEG Layer-3) - самый распространенный звуковой формат. Он урезает звук с потерей качества, но вырезается лишь звук, который не слышится человеческим ухом. В результате человек не слышит разницы, а места звук занимает меньше. Основная характеристика этого формата - битрейт (bitrate). Чем выше битрейт, тем лучше качество звука. Несжатый Audio CD имеет битрейт 1411,2 Кбит/с. Максимальное качество звучания в случае с форматом MP3 достигается при битрейте 320 Кбит/с. Все, что ниже 320 Кбит/с, -хуже качеством. Разница между 128 Кбит/с и 320 Кбит/с уже ощущается на слух, поэтому, если есть возможность скачать записи с более высоким битрейтом, сделайте это.
WMA (Windows Media Audio) - формат, разработанный компанией Microsoft для ОС Windows. Компания Microsoft пыталась создать замену для MP3, но, как показало время, у нее ничего не вышло.
OGG - открытый формат, поддерживающий кодирование аудио различными кодеками. Наиболее часто в OGG используется кодек Vorbis. По качеству сжатия формат сопоставим с MP3, но при этом менее распространен с точки зрения поддержки в аудиопроигрывателях и плеерах. Если есть возможность скачать музыку в формате MP3 и OGG, следует выбрать MP3, потому что ваш аудио-проигрыватель может не поддерживать формат OGG.
ААС - запатентованный аудиоформат, обеспечивающий лучшее качество звучания, чем MP3. На данный момент это лучший алгоритм кодирования звука с потерями. Файл этого формата может иметь расширения аас, mp4, m4a, m4b, т4р, т4г.
FLAC - формат сжатия без потерь. Он не вносит изменений в аудиопоток, поэтому закодированный с его помощью звук идентичен оригиналу. Используется для прослушивания звука на звуковых системах высокого уровня.


Видео форматы
Всевозможных форматов и стандартов видеоконтента не меньше, чем аудиоформатов. Начнем с международных стандартов, определяющих кодирование и формат хранения данных медиафайла:

MPEG-1 (Moving Picture Experts Group 1) — это стандарт сжатия видео и аудио. Для видео используется формат Video CD, а для аудио формат MPEG audio layer 3, или сокращенно всем известный формат MP3.
MPEG-2 (Moving Picture Experts Group 2) — этот стандарт используется в DVD и цифровом телевидении DBV. В этом формате снимают видео в различных устройствах для съемки видео.
MPEG-3 (Moving Picture Experts Group 3) - этот стандарт был разработан для телевидения высокой четкости HDTV, теперь стал частью стандарта MPEG-2.
MPEG-4 (Moving Picture Experts Group 4) - этот стандарт используется для сжатия цифрового видео и аудио. Состоит из нескольких стандартов, включает в себя многие возможности MPEG-1 и MPEG-2. В этом стандарте используются различные кодеки: DivX, Xvid, Н.264 (AVC) и другие. Формат MP4 является одной из спецификаций этого стандарта.
Медиафайл (правильнее именно медиафайл, а не видеофайл, поскольку в файле, который мы привыкли считать видеофайлом, есть потоки аудио и видео) имеет две ключевые характеристики: кодек и тип контейнера. Кодек, как мы уже знаем, определяет алгоритм кодирования и сжатия данных. Тип контейнера определяет формат записи с использованием различной информации: видео- и аудиоданные, субтитры и прочая информация, помещенная в контейнер. Примеры кодеков видео - DivX, Xvid, Н.264, Theora. Примеры контейнеров - AVI, QuickTime, 3GP, Ogg, MKV (Matroska).

Наиболее популярные форматы медиафайлов:
3GP - разработан для использования на мобильных телефонах, в ЗС-сетях. Гарантирует мощное сжатие, что позволяет использовать формат на слабых мобильных телефонах.
AVI (Audio/Video Interleaved) - разработка Microsoft, один из самых распространенных в мире форматов. В этом формате можно использовать разные кодеки.
FLV (Flash Video) - создан для передачи видео через Интернет. Самый распространенный формат в Интернете, часто используется на разных видеохостингах, предназначенных для хранения видео. Обеспечивает хорошее качество картинки при низком битрейте.
M2TS - видеофайл формата Blu-Ray.
MKV (Matroska) - контейнер, который может содержать видео, аудио, субтитры и прочее. Этот формат может содержать различные типы субтитров и поддерживает добавление нескольких звуковых дорожек в видео файл.
OGG - бесплатный, открытый формат, разработанный для хранения медиаконтента, закодированного разными кодеками.
ReadMedia - формат, созданный компанией RealNetworks. Используется в основном для трансляции телевидения и потокового видео в Интернете. Низкий битрейт и низкое качество картинки.
MOV - контейнер, разработанный корпорацией Apple для QuickTime. Это формат операционной системы Mac OS X.
MP4 - формат одной из спецификаций стандарта MPEG-4. Может содержать несколько видео- и аудиопотоков, субтитры, анимацию, панорамные изображения.
SWF (Shockwave Flash или Small Web Format) - видеоформат для флеш-анимации, векторной графики, видео и аудио в сети Интернет.
WMV (Windows Media Video) - разработка Microsoft. Попытка создать аналог MP4, которая тоже не увенчалась успехом.
WebM - открытый формат, предложенный корпорацией Google в качестве замены стандарта H.264/MPEG4.



Сжатие (компрессия) аудиоданных представляет собой процесс уменьшения скорости цифрового потока за счет сокращения статистической и психоакустической избыточности цифрового звукового сигнала.

Методы сокращения статистической избыточности аудиоданных также называют сжатием без потерь, а, соответственно, методы сокращения психоакустической избыточности — сжатием с потерями.

Сокращение статистической избыточности основано на учёте свойств самих звуковых сигналов. Она определяется наличием корреляционной связи между соседними отсчетами цифрового звукового сигнала, устранение которой позволяет сокращать объём передаваемых данных на 15…25 % по сравнению с их исходной величиной. Для передачи сигнала необходимо получить более компактное его представление, что возможно осуществить с помощью ортогонального преобразования. Важными условиями применения такого метода преобразования являются:

возможность восстанавливать исходный сигнал без искажений
способность обеспечивать наибольшую концентрацию энергии в небольшом числе коэффициентов преобразования
быстрый вычислительный алгоритм
Этим требованиям отвечает модифицированное дискретно-косинусное преобразование (МДКП).

Уменьшить скорость цифрового потока позволяют методы кодирования, учитывающие статистику звуковых сигналов, например, вероятности появления уровней разной величины. Одним из таких методов является код Хаффмана, где наиболее вероятным значениям сигнала приписываются более короткие кодовые слова, а значения отсчетов, вероятность появления которых мала, кодируются кодовыми словами большей длины. Именно в силу этих двух причин в наиболее эффективных алгоритмах компрессии цифровых аудиоданных кодированию подвергаются не сами отсчеты звукового сигнала, а коэффициенты МДКП.

Подобные методы применяются при архивации файлов.

Сжатие аудиоданных с потерями основывается на несовершенстве человеческого слуха при восприятии звуковой информации. Неспособность человека в определённых случаях различать тихие звуки в присутствии более громких, называемая эффектом маскировки, была использована в алгоритмах сокращения психоакустической избыточности. Эффекты слухового маскирования зависят от спектральных и временных характеристик маскируемого и маскирующего сигналов и могут быть разделены на две основные группы:

частотное (одновременное) маскирование
временное (неодновременное) маскирование
Эффект маскирования в частотной области связан с тем, что в присутствии больших звуковых амплитуд человеческое ухо нечувствительно к малым амплитудам близких частот. То есть, когда два сигнала одновременно находятся в ограниченной частотной области, то более слабый сигнал становится неслышимым на фоне более сильного.

Маскирование во временной области характеризует динамические свойства слуха, показывая изменение во времени относительного порога слышимости (порог слышимости одного сигнала в присутствии другого), когда маскирующий и маскируемый сигналы звучат не одновременно. При этом следует различать явления послемаскировки (изменение порога слышимости после сигнала высокого уровня) и предмаскировки (изменение порога слышимости перед приходом сигнала максимального уровня). Более слабый сигнал становится неслышимым за 5 − 20 мс до включения сигнала маскирования и становится слышимым через 50 − 200 мс после его включения.

Наилучшим методом кодирования звука, учитывающим эффект маскирования, оказывается полосное кодирование. Сущность его заключается в следующем. Группа отсчетов входного звукового сигнала, называемая кадром, поступает на блок фильтров который разделяет сигнал на частотные поддиапазоны. На выходе каждого фильтра оказывается та часть входного сигнала, которая попадает в полосу пропускания данного фильтра. Далее, в каждой полосе с помощью психоакустической модели, анализируется спектральный состав сигнала и оценивается, какую часть сигнала следует передавать без сокращений, а какая лежит ниже порога маскирования и может быть переквантована на меньшее число бит. Для сокращения максимального динамического диапазона определяется максимальный отсчет в кадре и вычисляется масштабирующий множитель, который приводит этот отсчет к верхнему уровню квантования. Эта операция аналогична компандированию в аналоговом вещании. На этот же множитель умножаются и все остальные отсчеты. Масштабирующий множитель передается к декодеру вместе с кодированными данными для коррекции коэффициента передачи последнего. После масштабирования производится оценка порога маскирования и осуществляется перераспределение общего числа битов между всеми полосами.

Очевидно, что после устранения психоакустической избыточности звуковых сигналов их точное восстановления при декодировании оказывается уже невозможным. Методами устранения психофизической избыточности можно обеспечить сжатие цифровых аудиоданных в 10 − 12 раз без существенных потерь в качестве.

Структура кодера сжатия аудиоданных с потерями

Обобщенная структура кодера звукового сигнала с компрессией цифровых аудиоданных
Исходный цифровой звуковой сигнал разделяется на частотные поддиапазоны и сегментируется по времени в блоке временной и частотной сегментации.
Длина кодируемой выборки зависит от формы временной функции звукового сигнала. При отсутствии резких выбросов по амплитуде используется так называемая длинная выборка, обеспечивающая высокое разрешение по частоте. В случае же резких изменений амплитуды сигнала длина кодируемой выборки резко уменьшается, что дает более высокое разрешение по времени. Решение об изменении длины кодируемой выборки принимает блок психоакустического анализа, вычисляя значение психоакустической энтропии сигнала.
После сегментации сигналы частотных поддиапазонов нормируются, квантуются и кодируются. В наиболее эффективных алгоритмах компрессии кодированию подвергаются не сами отсчеты выборки звукового сигнала, а соответствующие им коэффициенты МДКП.
Учёт закономерностей слухового восприятия звукового сигнала выполняется в блоке психоакустического анализа. Здесь по специальной процедуре для каждого частотного поддиапазона рассчитывается максимально допустимый уровень искажений (шумов) квантования, при котором они ещё маскируются полезным сигналом данного поддиапазона.
Блок динамического распределения бит в соответствии с требованиями психоакустической модели для каждого поддиапазона кодирования выделяет такое минимально возможное их количество, при котором уровень искажений, вызванных квантованием, не превышал порога их слышимости, рассчитанного психоакустической моделью.
Также могут использоваться:
матрицирование стерео — сложение и вычитание левого и правого канала для устранения повторяющейся информации
специальные процедуры итерационных циклов, позволяющие управлять величиной энергии искажений квантования в поддиапазонах при недостаточном числе доступных для кодирования бит
процедуры линейного и обратного адаптивного предсказаний
техника сглаживания переходных шумов во временной области (Temporal Noise Shaping — TNS), позволяющая управлять микроструктурой искажений квантования внутри каждого поддиапазона кодирования
Многие другие приёмы могут послужить способом сократить объём данных звуковой информации. Даже простое сужение полосы частот сигнала вместе с уменьшением динамического диапазона может уже называться сжатием аудиоданных. Например, в стандарте сжатия звука в сотовой связи используется и то и другое. Стремясь удалить избыточность из звука, кодек при плохом качестве сигнала становится избирателен к определённым словам, упорно проглатывая их.